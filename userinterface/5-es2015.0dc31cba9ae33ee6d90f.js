(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{iCMG:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return me}));var r=n("ofXK"),a=n("3Pt+"),i=n("rhD1"),s=n("tyNb"),o=n("fXoL"),c=n("lGQG");let u=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){const n=this.authService.getIsAuth();return n||this.router.navigate(["/"]),n}}return e.\u0275fac=function(t){return new(t||e)(o.Vb(c.a),o.Vb(s.b))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac}),e})(),m=(()=>{class e{constructor(e,t){this.service=e,this.router=t}canActivate(e,t){const n=this.service.getRole();console.log(n);const r=this.service.getIsAuth();return r&&"manager"===n||r&&"admin"===n?r:void this.router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(o.Vb(c.a),o.Vb(s.b))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac}),e})();var b=n("6Qg2"),d=n("bTqV"),l=n("7EHt");const g=function(e){return["/auth/edit",e]};function f(e,t){if(1&e&&(o.Rb(0,"button",7),o.uc(1," EDIT "),o.Qb()),2&e){const e=o.cc().$implicit;o.hc("routerLink",o.jc(1,g,e.id))}}function h(e,t){if(1&e){const e=o.Sb();o.Rb(0,"button",8),o.Zb("click",(function(){o.nc(e);const t=o.cc().$implicit;return o.cc(2).deltheuser(t.id)})),o.uc(1," DELETE "),o.Qb()}}const p=function(e){return["/auth/user",e]};function w(e,t){if(1&e&&(o.Rb(0,"mat-expansion-panel"),o.Rb(1,"mat-expansion-panel-header"),o.Rb(2,"mat-panel-title"),o.uc(3),o.Qb(),o.Qb(),o.Rb(4,"p"),o.uc(5),o.Qb(),o.Rb(6,"mat-action-row"),o.Rb(7,"button",2),o.uc(8," SEE USER "),o.Qb(),o.tc(9,f,2,3,"button",5),o.tc(10,h,2,0,"button",6),o.Qb(),o.Qb()),2&e){const e=t.$implicit,n=o.cc(2);o.Bb(3),o.xc(" ",e.firstname," ",e.lastname," "),o.Bb(2),o.vc(e.email),o.Bb(2),o.hc("routerLink",o.jc(6,p,e.id)),o.Bb(2),o.hc("ngIf",n.userRole===n.adminRole||n.userRole===n.managerRole),o.Bb(1),o.hc("ngIf",n.userRole===n.adminRole)}}function v(e,t){if(1&e&&(o.Rb(0,"mat-accordion",3),o.tc(1,w,11,8,"mat-expansion-panel",4),o.Qb()),2&e){const e=o.cc();o.Bb(1),o.hc("ngForOf",e.usersData)}}function P(e,t){1&e&&(o.Rb(0,"p",9),o.uc(1," No users registered yet!\n"),o.Qb())}const R=function(){return["/auth/create-user"]};let C=(()=>{class e{constructor(e,t){this.service=e,this.authService=t,this.usersData=[],this.productsStatistics=[],this.adminRole="admin",this.managerRole="manager",this.userRole=null}ngOnInit(){this.service.getAllUsers().subscribe(e=>{let t;console.log(e),t=e.data.data,this.usersData=t}),this.userSub=this.service.getUserUpdateListener().subscribe(e=>{this.usersData=e}),this.userRole=this.authService.getRole()}deltheuser(e){this.service.deleteUser(e)}ngOnDestroy(){this.userSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(b.a),o.Mb(c.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["admin-panel"]],decls:4,vars:4,consts:[["multi","true",4,"ngIf"],["class","info-text mat-body-1",4,"ngIf"],["mat-button","","color","accent",3,"routerLink"],["multi","true"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click"],[1,"info-text","mat-body-1"]],template:function(e,t){1&e&&(o.tc(0,v,2,1,"mat-accordion",0),o.tc(1,P,2,0,"p",1),o.Rb(2,"button",2),o.uc(3," CREATE NEW USER ->\n"),o.Qb()),2&e&&(o.hc("ngIf",t.usersData.length>0),o.Bb(1),o.hc("ngIf",t.usersData.length<=0),o.Bb(1),o.hc("routerLink",o.ic(3,R)))},directives:[r.k,d.b,s.c,l.a,r.j,l.c,l.e,l.f,l.d],styles:["mat-card[_ngcontent-%COMP%]{margin-top:20px;background:#a9a9a9}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:large;color:#f0f8ff;text-align:center}mat-cars[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;color:#3f51b5}mat-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}"]}),e})();var I=n("HDdC");const M=e=>{const t=e.value,n=new FileReader;return I.a.create(e=>{n.addEventListener("loadend",()=>{const t=new Uint8Array(n.result).subarray(0,4);let r="",a=!1;for(let e=0;e<t.length;e++)r+=t[e].toString(16);switch(r){case"89504e47":a=!0;break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":a=!0;break;default:a=!1}e.next(a?null:{invalidFileFormat:!0}),e.complete()}),n.readAsArrayBuffer(t)})};var Q=n("Wp6s"),O=n("kmnG"),U=n("qFsG"),y=n("NFeN"),_=n("Xa2L");function k(e,t){if(1&e&&(o.Rb(0,"div",14),o.Nb(1,"img",15),o.Qb()),2&e){const e=o.cc();o.Bb(1),o.hc("src",e.imagePreview,o.oc)}}function N(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter your name"),o.Qb())}function B(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter your name"),o.Qb())}function L(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter your email address"),o.Qb())}function x(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter correct role"),o.Qb())}function S(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter a password"),o.Qb())}function A(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please confirm your password"),o.Qb())}function q(e,t){1&e&&(o.Rb(0,"button",16),o.uc(1,"CREATE"),o.Qb())}function F(e,t){1&e&&o.Nb(0,"mat-spinner")}let D=(()=>{class e{constructor(e){this.service=e,this.hide=!0,this.isLoading=!1,this.createUserForm=new a.d({firstname:new a.b("",a.m.required),lastname:new a.b("",a.m.required),image:new a.b("",a.m.required,[M]),email:new a.b("",[a.m.required,a.m.email]),role:new a.b("",a.m.required),password:new a.b("",a.m.required),confirmPassword:new a.b("",a.m.required)})}ngOnInit(){this.authStatusSub=this.service.getAuthStatusListener().subscribe(e=>{this.isLoading=!1})}pickImage(e){const t=e.target.files[0];this.createUserForm.patchValue({image:t}),this.createUserForm.get("image").updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t)}get firstname(){return this.createUserForm.get("firstname")}get lastname(){return this.createUserForm.get("lastname")}get email(){return this.createUserForm.get("email")}get role(){return this.createUserForm.get("role")}get password(){return this.createUserForm.get("password")}get confirmPassword(){return this.createUserForm.get("confirmPassword")}createData(){this.createUserForm.invalid||(this.isLoading=!0,this.service.createUser(this.createUserForm.value.firstname,this.createUserForm.value.lastname,this.createUserForm.value.email,this.createUserForm.value.role,this.createUserForm.value.password,this.createUserForm.value.confirmPassword,this.createUserForm.value.image),this.createUserForm.reset())}ngOnDestroy(){this.authStatusSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(c.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["ng-component"]],decls:40,vars:15,consts:[[3,"formGroup","ngSubmit"],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],[4,"ngIf"],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["matInput","","formControlName","role","placeholder","role","required",""],["matInput","","formControlName","password","placeholder","********","required","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","confirm password","required","",3,"type"],["mat-raised-button","","color","accent",4,"ngIf"],[1,"image-preview"],[3,"src"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){const e=o.Sb();o.Rb(0,"mat-card"),o.Rb(1,"span"),o.uc(2,"CREATE USER"),o.Qb(),o.Rb(3,"form",0),o.Zb("ngSubmit",(function(){return t.createData()})),o.Rb(4,"div"),o.Rb(5,"button",1),o.Zb("click",(function(){return o.nc(e),o.mc(8).click()})),o.uc(6," IMAGE "),o.Qb(),o.Rb(7,"input",2,3),o.Zb("change",(function(e){return t.pickImage(e)})),o.Qb(),o.Qb(),o.tc(9,k,2,1,"div",4),o.Rb(10,"mat-form-field"),o.Nb(11,"input",5),o.tc(12,N,2,0,"mat-error",6),o.Qb(),o.Rb(13,"mat-form-field"),o.Nb(14,"input",7),o.tc(15,B,2,0,"mat-error",6),o.Qb(),o.Rb(16,"mat-form-field"),o.Nb(17,"input",8),o.tc(18,L,2,0,"mat-error",6),o.Qb(),o.Rb(19,"mat-form-field"),o.Nb(20,"input",9),o.Nb(21,"br"),o.Rb(22,"mat-hint"),o.uc(23," roles can only be (admin|user|manager)"),o.Qb(),o.tc(24,x,2,0,"mat-error",6),o.Qb(),o.Rb(25,"mat-form-field"),o.Rb(26,"mat-label"),o.uc(27,"Password"),o.Qb(),o.Nb(28,"input",10),o.Rb(29,"button",11),o.Zb("click",(function(){return t.hide=!t.hide})),o.Rb(30,"mat-icon"),o.uc(31),o.Qb(),o.Qb(),o.tc(32,S,2,0,"mat-error",6),o.Qb(),o.Rb(33,"mat-form-field"),o.Rb(34,"mat-label"),o.uc(35,"confirm Password"),o.Qb(),o.Nb(36,"input",12),o.tc(37,A,2,0,"mat-error",6),o.Qb(),o.tc(38,q,2,0,"button",13),o.tc(39,F,1,0,"mat-spinner",6),o.Qb(),o.Qb()}2&e&&(o.Bb(3),o.hc("formGroup",t.createUserForm),o.Bb(6),o.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.createUserForm.get("image").valid),o.Bb(3),o.hc("ngIf",t.firstname.touched&&t.firstname.invalid),o.Bb(3),o.hc("ngIf",t.lastname.touched&&t.lastname.invalid),o.Bb(3),o.hc("ngIf",t.email.touched&&t.email.invalid),o.Bb(6),o.hc("ngIf",t.role.touched&&t.role.invalid),o.Bb(4),o.hc("type",t.hide?"password":"text"),o.Bb(1),o.Cb("aria-label","Hide password")("aria-pressed",t.hide),o.Bb(2),o.vc(t.hide?"visibility_off":"visibility"),o.Bb(1),o.hc("ngIf",t.password.touched&&t.password.invalid),o.Bb(4),o.hc("type",t.hide?"password":"text"),o.Bb(1),o.hc("ngIf",t.confirmPassword.touched&&t.confirmPassword.invalid),o.Bb(1),o.hc("ngIf",!t.isLoading),o.Bb(1),o.hc("ngIf",t.isLoading))},directives:[Q.a,a.n,a.i,a.e,d.b,r.k,O.b,U.a,a.a,a.h,a.c,a.l,O.e,O.f,O.g,y.a,O.a,_.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% auto}.image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}mat-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-size:x-large;margin:8% 30%}@media (max-width:768px){mat-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:3% auto;text-align:center}}"]}),e})();function E(e,t){if(1&e&&(o.Rb(0,"div",13),o.Nb(1,"img",6),o.Qb()),2&e){const e=o.cc();o.Bb(1),o.hc("src",e.imagePreview,o.oc)}}function G(e,t){1&e&&(o.Rb(0,"button",14),o.uc(1,"UPDATE"),o.Qb())}function V(e,t){1&e&&o.Nb(0,"mat-spinner")}let Z=(()=>{class e{constructor(e,t){this.service=e,this.route=t,this.isLoading=!1}ngOnInit(){this.userUpdateSub=this.service.getUserUpdateDataListener().subscribe(e=>{this.isLoading=!1}),this.userUpdation=new a.d({firstname:new a.b("",a.m.required),lastname:new a.b("",a.m.required),image:new a.b("",a.m.required,[M]),email:new a.b("",[a.m.required,a.m.email]),role:new a.b("",a.m.required)}),this.route.paramMap.subscribe(e=>{e.has("id")?(this.userId=e.get("id"),this.service.getUserById(this.userId).subscribe(e=>{let t;t=e.data.data,this.user={firstname:t.firstname,lastname:t.lastname,email:t.email,role:t.role,image:t.image},this.userUpdation.patchValue({firstname:this.user.firstname,lastname:this.user.lastname,email:this.user.email,role:this.user.role,image:this.user.image})})):this.userId=null})}pickImage(e){const t=e.target.files[0];this.userUpdation.patchValue({image:t}),this.userUpdation.get("image").updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t)}updateUserData(){console.log(this.userUpdation.value),this.userUpdation.invalid||(this.isLoading=!0,this.service.updateUser(this.userId,this.userUpdation.value.firstname,this.userUpdation.value.lastname,this.userUpdation.value.role,this.userUpdation.value.email,this.userUpdation.value.image),this.userUpdation.reset())}ngOnDestroy(){this.userUpdateSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(b.a),o.Mb(s.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["ng-component"]],decls:25,vars:5,consts:[[3,"formGroup","ngSubmit"],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],[1,"image-display"],[3,"src"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["matInput","","formControlName","role","placeholder","role","required",""],["mat-raised-button","","color","accent",4,"ngIf"],[4,"ngIf"],[1,"image-preview"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){const e=o.Sb();o.Rb(0,"mat-card"),o.Rb(1,"span"),o.uc(2,"UPDATE USER"),o.Qb(),o.Rb(3,"form",0),o.Zb("ngSubmit",(function(){return t.updateUserData()})),o.Rb(4,"div"),o.Rb(5,"button",1),o.Zb("click",(function(){return o.nc(e),o.mc(8).click()})),o.uc(6," UPDATE IMAGE "),o.Qb(),o.Rb(7,"input",2,3),o.Zb("change",(function(e){return t.pickImage(e)})),o.Qb(),o.Qb(),o.tc(9,E,2,1,"div",4),o.Rb(10,"div",5),o.Nb(11,"img",6),o.Qb(),o.Rb(12,"mat-form-field"),o.Nb(13,"input",7),o.Qb(),o.Rb(14,"mat-form-field"),o.Nb(15,"input",8),o.Qb(),o.Rb(16,"mat-form-field"),o.Nb(17,"input",9),o.Qb(),o.Rb(18,"mat-form-field"),o.Nb(19,"input",10),o.Nb(20,"br"),o.Rb(21,"mat-hint"),o.uc(22," roles can only be (admin|user|manager)"),o.Qb(),o.Qb(),o.tc(23,G,2,0,"button",11),o.tc(24,V,1,0,"mat-spinner",12),o.Qb(),o.Qb()}2&e&&(o.Bb(3),o.hc("formGroup",t.userUpdation),o.Bb(6),o.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.userUpdation.get("image").valid),o.Bb(2),o.hc("src",t.user.image,o.oc),o.Bb(12),o.hc("ngIf",!t.isLoading),o.Bb(1),o.hc("ngIf",t.isLoading))},directives:[Q.a,a.n,a.i,a.e,d.b,r.k,O.b,U.a,a.a,a.h,a.c,a.l,O.e,_.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% auto}.image-display[_ngcontent-%COMP%], .image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}span[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{font-size:large;text-align:center;margin:8px 0;text-transform:uppercase}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),e})();const z=function(){return["/auth/admin"]};function T(e,t){1&e&&(o.Rb(0,"button",6),o.uc(1," see manager panel "),o.Qb()),2&e&&o.hc("routerLink",o.ic(1,z))}function H(e,t){1&e&&(o.Rb(0,"button",7),o.uc(1," see admin panel "),o.Qb()),2&e&&o.hc("routerLink",o.ic(1,z))}let j=(()=>{class e{constructor(e,t){this.userService=e,this.authService=t,this.adminRole="admin",this.managerRole="manager",this.userRole=null}ngOnInit(){this.userService.getMe().subscribe(e=>{e&&(this.userInformation=e.data.data)}),this.userRole=this.authService.getRole()}onClick(){this.userService.delMe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(b.a),o.Mb(c.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["user-portal"]],decls:17,vars:9,consts:[[3,"src"],["routerLink","/auth/user-settings"],[1,"fa","fa-cog"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(o.Rb(0,"mat-card"),o.Nb(1,"img",0),o.Rb(2,"mat-card-title"),o.uc(3),o.Qb(),o.Rb(4,"span"),o.uc(5),o.Qb(),o.Nb(6,"br"),o.Rb(7,"span"),o.uc(8),o.dc(9,"date"),o.Qb(),o.Rb(10,"a",1),o.Nb(11,"i",2),o.Qb(),o.Nb(12,"br"),o.Rb(13,"button",3),o.Zb("click",(function(){return t.onClick()})),o.uc(14," delete account "),o.Qb(),o.tc(15,T,2,2,"button",4),o.tc(16,H,2,2,"button",5),o.Qb()),2&e&&(o.Bb(1),o.hc("src",t.userInformation.image,o.oc),o.Bb(2),o.xc("",t.userInformation.firstname," ",t.userInformation.lastname,""),o.Bb(2),o.wc(" Email: ",t.userInformation.email,""),o.Bb(3),o.wc(" Last password changed at :",o.ec(9,7,t.userInformation.passwordChangedAt),""),o.Bb(7),o.hc("ngIf",t.userRole===t.managerRole),o.Bb(1),o.hc("ngIf",t.userRole===t.adminRole))},directives:[Q.a,Q.c,s.e,d.b,r.k,s.c],pipes:[r.d],styles:["mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:30%;float:left}mat-card[_ngcontent-%COMP%]{height:100%;margin-top:5%}mat-card-title[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%;text-align:center;font-size:xx-large}button[_ngcontent-%COMP%]{margin-left:10px}span[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%}i[_ngcontent-%COMP%]{margin:10px;font-size:x-large;opacity:.7}i[_ngcontent-%COMP%], i[_ngcontent-%COMP%]:hover{color:teal}i[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width:768px){mat-card-title[_ngcontent-%COMP%]{font-size:20px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}"]}),e})(),J=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["user-settings"]],decls:6,vars:0,consts:[["mat-button","","routerLinkActive","mat-accent","routerLink","/auth/user-change-password"],["mat-button","","routerLink","/auth/user-update-me","routerLinkActive","mat-accent"]],template:function(e,t){1&e&&(o.Rb(0,"mat-card"),o.Rb(1,"a",0),o.uc(2,"change password"),o.Qb(),o.Nb(3,"span"),o.Rb(4,"a",1),o.uc(5,"Update your profile"),o.Qb(),o.Qb())},directives:[Q.a,d.a,s.e,s.d],styles:["mat-card[_ngcontent-%COMP%]{width:80%;margin:0 5%}mat-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin-left:2rem;float:center}"]}),e})();function K(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"please enter the required fields"),o.Qb())}function X(e,t){if(1&e&&(o.Rb(0,"div",10),o.Nb(1,"img",11),o.Qb()),2&e){const e=o.cc();o.Bb(1),o.hc("src",e.imagePreview,o.oc)}}function Y(e,t){1&e&&(o.Rb(0,"button",12),o.uc(1,"update"),o.Qb())}function $(e,t){1&e&&o.Nb(0,"mat-spinner")}let W=(()=>{class e{constructor(e){this.service=e,this.isLoading=!1}ngOnInit(){this.userUpdateSub=this.service.getUserUpdateDataListener().subscribe(e=>{this.isLoading=!1}),this.userUpdate=new a.d({firstname:new a.b("",a.m.required),lastname:new a.b("",a.m.required),image:new a.b("",a.m.required,[M]),email:new a.b("",[a.m.required,a.m.email])})}pickImage(e){const t=e.target.files[0];this.userUpdate.patchValue({image:t}),this.userUpdate.get("image").updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(t)}updateMe(){this.isLoading=!0,console.log(this.userUpdate.value),this.service.updateMe(this.userUpdate.value.firstname,this.userUpdate.value.lastname,this.userUpdate.value.email,this.userUpdate.value.image),this.userUpdate.reset()}ngOnDestroy(){this.userUpdateSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(b.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-user-update-me"]],decls:19,vars:5,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],["mat-raised-button","","color","accent",4,"ngIf"],[1,"image-preview"],[3,"src"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){const e=o.Sb();o.Rb(0,"mat-card"),o.Rb(1,"span"),o.uc(2,"Update your data"),o.Qb(),o.Rb(3,"form",0),o.Zb("ngSubmit",(function(){return t.updateMe()})),o.tc(4,K,2,0,"mat-error",1),o.Rb(5,"mat-form-field"),o.Nb(6,"input",2),o.Qb(),o.Rb(7,"mat-form-field"),o.Nb(8,"input",3),o.Qb(),o.Rb(9,"mat-form-field"),o.Nb(10,"input",4),o.Qb(),o.Rb(11,"div"),o.Rb(12,"button",5),o.Zb("click",(function(){return o.nc(e),o.mc(15).click()})),o.uc(13," PROFILE IMAGE "),o.Qb(),o.Rb(14,"input",6,7),o.Zb("change",(function(e){return t.pickImage(e)})),o.Qb(),o.Qb(),o.tc(16,X,2,1,"div",8),o.tc(17,Y,2,0,"button",9),o.tc(18,$,1,0,"mat-spinner",1),o.Qb(),o.Qb()}2&e&&(o.Bb(3),o.hc("formGroup",t.userUpdate),o.Bb(1),o.hc("ngIf",t.userUpdate.errors),o.Bb(12),o.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.userUpdate.get("image").valid),o.Bb(1),o.hc("ngIf",!t.isLoading),o.Bb(1),o.hc("ngIf",t.isLoading))},directives:[Q.a,a.n,a.i,a.e,r.k,O.b,U.a,a.a,a.h,a.c,a.l,d.b,O.a,_.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% 20%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),e})();function ee(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter Your Old Password"),o.Qb())}function te(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please enter Your New Password"),o.Qb())}function ne(e,t){1&e&&(o.Rb(0,"mat-error"),o.uc(1,"Please Re-enter Your New Password"),o.Qb())}function re(e,t){1&e&&(o.Rb(0,"button",6),o.uc(1," Change Password "),o.Qb())}function ae(e,t){1&e&&o.Nb(0,"mat-spinner")}let ie=(()=>{class e{constructor(e){this.service=e,this.hide=!0,this.isLoading=!1,this.changePassword=new a.d({oldPassword:new a.b("",a.m.required),newPassword:new a.b("",a.m.required),confirmPassword:new a.b("",a.m.required)})}ngOnInit(){this.authStatusSub=this.service.getAuthStatusListener().subscribe(e=>{this.isLoading=!1})}changeUserPass(){this.changePassword.invalid||(this.isLoading=!0,this.service.updatePassword(this.changePassword.value.oldPassword,this.changePassword.value.newPassword,this.changePassword.value.confirmPassword),this.changePassword.reset())}ngOnDestroy(){this.authStatusSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(c.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-user-change-password"]],decls:19,vars:6,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","oldPassword","placeholder","your Old Password Here","required",""],[4,"ngIf"],["matInput","","formControlName","newPassword","placeholder","your New Password Here","required",""],["matInput","","formControlName","confirmPassword","placeholder","your confirm Password Here","required",""],["mat-raised-button","","color","accent",4,"ngIf"],["mat-raised-button","","color","accent"]],template:function(e,t){1&e&&(o.Rb(0,"mat-card"),o.Rb(1,"form",0),o.Zb("ngSubmit",(function(){return t.changeUserPass()})),o.Rb(2,"mat-form-field"),o.Rb(3,"mat-label"),o.uc(4," Old Password"),o.Qb(),o.Nb(5,"input",1),o.tc(6,ee,2,0,"mat-error",2),o.Qb(),o.Rb(7,"mat-form-field"),o.Rb(8,"mat-label"),o.uc(9," New Password"),o.Qb(),o.Nb(10,"input",3),o.tc(11,te,2,0,"mat-error",2),o.Qb(),o.Rb(12,"mat-form-field"),o.Rb(13,"mat-label"),o.uc(14,"Confirm New Password"),o.Qb(),o.Nb(15,"input",4),o.tc(16,ne,2,0,"mat-error",2),o.Qb(),o.tc(17,re,2,0,"button",5),o.tc(18,ae,1,0,"mat-spinner",2),o.Qb(),o.Qb()),2&e&&(o.Bb(1),o.hc("formGroup",t.changePassword),o.Bb(5),o.hc("ngIf",t.changePassword.get("oldPassword").invalid),o.Bb(5),o.hc("ngIf",t.changePassword.get("newPassword").invalid),o.Bb(5),o.hc("ngIf",t.changePassword.get("confirmPassword").invalid),o.Bb(1),o.hc("ngIf",!t.isLoading),o.Bb(1),o.hc("ngIf",t.isLoading))},directives:[Q.a,a.n,a.i,a.e,O.b,O.f,U.a,a.a,a.h,a.c,a.l,r.k,O.a,d.b,_.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% 20%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),e})();function se(e,t){if(1&e&&(o.Rb(0,"span"),o.uc(1),o.dc(2,"date"),o.Qb()),2&e){const e=o.cc();o.Bb(1),o.wc(" Last password changed at :",o.ec(2,1,e.oneUser.passwordChangedAt),"")}}const oe=function(){return["/auth/admin"]},ce=[{path:"edit/:id",component:Z,canActivate:[u,m]},{path:"user/:id",component:(()=>{class e{constructor(e,t){this.service=e,this.route=t,this.oneUserData=[]}ngOnInit(){this.route.paramMap.subscribe(e=>{e.has("id")?(this.userId=e.get("id"),this.service.getUserById(this.userId).subscribe(e=>{let t;t=e.data.data,this.oneUser=t,this.oneUserData=t})):this.userId=null})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(b.a),o.Mb(s.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["ng-component"]],decls:14,vars:8,consts:[[3,"src"],[4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(o.Rb(0,"mat-card"),o.Nb(1,"img",0),o.Rb(2,"mat-card-title"),o.uc(3),o.Qb(),o.Rb(4,"span"),o.uc(5),o.Qb(),o.Nb(6,"br"),o.Rb(7,"span"),o.uc(8),o.Qb(),o.Nb(9,"br"),o.tc(10,se,3,3,"span",1),o.Nb(11,"br"),o.Rb(12,"button",2),o.uc(13," <- GO BACK\n"),o.Qb(),o.Qb()),2&e&&(o.Bb(1),o.hc("src",t.oneUser.image,o.oc),o.Bb(2),o.xc("",t.oneUser.firstname," ",t.oneUser.lastname,""),o.Bb(2),o.wc(" Email: ",t.oneUser.email,""),o.Bb(3),o.wc(" Role: ",t.oneUser.role,""),o.Bb(2),o.hc("ngIf",t.oneUser.passwordChangedAt),o.Bb(2),o.hc("routerLink",o.ic(7,oe)))},directives:[Q.a,Q.c,r.k,d.b,s.c],pipes:[r.d],styles:["mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:30%;float:left}mat-card[_ngcontent-%COMP%]{height:100%;margin-top:5%}mat-card-title[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;margin-top:-43px;margin-left:-152px}mat-card-title[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%}i[_ngcontent-%COMP%]{margin-left:3%;font-size:x-large;opacity:.7}i[_ngcontent-%COMP%], i[_ngcontent-%COMP%]:hover{color:teal}i[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width:768px){mat-card-title[_ngcontent-%COMP%]{margin-top:-4px;margin-left:-51px;font-size:27px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}"]}),e})(),canActivate:[u,m]},{path:"admin",component:C,canActivate:[u,m]},{path:"create-user",component:D,canActivate:[u,m]},{path:"user-change-password",component:ie,canActivate:[u]},{path:"user-update-me",component:W,canActivate:[u]},{path:"user-settings",component:J,canActivate:[u]},{path:"profile",component:j,canActivate:[u]}];let ue=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},providers:[u,m],imports:[[s.f.forChild(ce)],s.f]}),e})(),me=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[r.b,a.k,a.f,i.a,s.f,ue]]}),e})()}}]);