function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{iCMG:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return Re}));var a,r,i=n("ofXK"),o=n("3Pt+"),c=n("rhD1"),s=n("tyNb"),u=n("fXoL"),m=n("lGQG"),l=((r=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this.authService.getIsAuth();return n||this.router.navigate(["/"]),n}}]),e}()).\u0275fac=function(e){return new(e||r)(u.Vb(m.a),u.Vb(s.b))},r.\u0275prov=u.Ib({token:r,factory:r.\u0275fac}),r),b=((a=function(){function e(t,n){_classCallCheck(this,e),this.service=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this.service.getRole();console.log(n);var a=this.service.getIsAuth();return a&&"manager"===n||a&&"admin"===n?a:void this.router.navigate(["/"])}}]),e}()).\u0275fac=function(e){return new(e||a)(u.Vb(m.a),u.Vb(s.b))},a.\u0275prov=u.Ib({token:a,factory:a.\u0275fac}),a),d=n("6Qg2"),f=n("bTqV"),g=n("7EHt"),h=function(e){return["/auth/edit",e]};function p(e,t){if(1&e&&(u.Rb(0,"button",7),u.uc(1," EDIT "),u.Qb()),2&e){var n=u.cc().$implicit;u.hc("routerLink",u.jc(1,h,n.id))}}function v(e,t){if(1&e){var n=u.Sb();u.Rb(0,"button",8),u.Zb("click",(function(){u.nc(n);var e=u.cc().$implicit;return u.cc(2).deltheuser(e.id)})),u.uc(1," DELETE "),u.Qb()}}var w=function(e){return["/auth/user",e]};function P(e,t){if(1&e&&(u.Rb(0,"mat-expansion-panel"),u.Rb(1,"mat-expansion-panel-header"),u.Rb(2,"mat-panel-title"),u.uc(3),u.Qb(),u.Qb(),u.Rb(4,"p"),u.uc(5),u.Qb(),u.Rb(6,"mat-action-row"),u.Rb(7,"button",2),u.uc(8," SEE USER "),u.Qb(),u.tc(9,p,2,3,"button",5),u.tc(10,v,2,0,"button",6),u.Qb(),u.Qb()),2&e){var n=t.$implicit,a=u.cc(2);u.Bb(3),u.xc(" ",n.firstname," ",n.lastname," "),u.Bb(2),u.vc(n.email),u.Bb(2),u.hc("routerLink",u.jc(6,w,n.id)),u.Bb(2),u.hc("ngIf",a.userRole===a.adminRole||a.userRole===a.managerRole),u.Bb(1),u.hc("ngIf",a.userRole===a.adminRole)}}function C(e,t){if(1&e&&(u.Rb(0,"mat-accordion",3),u.tc(1,P,11,8,"mat-expansion-panel",4),u.Qb()),2&e){var n=u.cc();u.Bb(1),u.hc("ngForOf",n.usersData)}}function R(e,t){1&e&&(u.Rb(0,"p",9),u.uc(1," No users registered yet!\n"),u.Qb())}var y,k=function(){return["/auth/create-user"]},_=((y=function(){function e(t,n){_classCallCheck(this,e),this.service=t,this.authService=n,this.usersData=[],this.productsStatistics=[],this.adminRole="admin",this.managerRole="manager",this.userRole=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.service.getAllUsers().subscribe((function(t){var n;console.log(t),n=t.data.data,e.usersData=n})),this.userSub=this.service.getUserUpdateListener().subscribe((function(t){e.usersData=t})),this.userRole=this.authService.getRole()}},{key:"deltheuser",value:function(e){this.service.deleteUser(e)}},{key:"ngOnDestroy",value:function(){this.userSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||y)(u.Mb(d.a),u.Mb(m.a))},y.\u0275cmp=u.Gb({type:y,selectors:[["admin-panel"]],decls:4,vars:4,consts:[["multi","true",4,"ngIf"],["class","info-text mat-body-1",4,"ngIf"],["mat-button","","color","accent",3,"routerLink"],["multi","true"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click"],[1,"info-text","mat-body-1"]],template:function(e,t){1&e&&(u.tc(0,C,2,1,"mat-accordion",0),u.tc(1,R,2,0,"p",1),u.Rb(2,"button",2),u.uc(3," CREATE NEW USER ->\n"),u.Qb()),2&e&&(u.hc("ngIf",t.usersData.length>0),u.Bb(1),u.hc("ngIf",t.usersData.length<=0),u.Bb(1),u.hc("routerLink",u.ic(3,k)))},directives:[i.k,f.b,s.c,g.a,i.j,g.c,g.e,g.f,g.d],styles:["mat-card[_ngcontent-%COMP%]{margin-top:20px;background:#a9a9a9}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:large;color:#f0f8ff;text-align:center}mat-cars[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;color:#3f51b5}mat-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}"]}),y),I=n("HDdC"),M=function(e){var t=e.value,n=new FileReader;return I.a.create((function(e){n.addEventListener("loadend",(function(){for(var t=new Uint8Array(n.result).subarray(0,4),a="",r=!1,i=0;i<t.length;i++)a+=t[i].toString(16);switch(a){case"89504e47":r=!0;break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":r=!0;break;default:r=!1}e.next(r?null:{invalidFileFormat:!0}),e.complete()})),n.readAsArrayBuffer(t)}))},O=n("Wp6s"),Q=n("kmnG"),U=n("qFsG"),N=n("NFeN"),B=n("Xa2L");function L(e,t){if(1&e&&(u.Rb(0,"div",14),u.Nb(1,"img",15),u.Qb()),2&e){var n=u.cc();u.Bb(1),u.hc("src",n.imagePreview,u.oc)}}function x(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter your name"),u.Qb())}function S(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter your name"),u.Qb())}function A(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter your email address"),u.Qb())}function q(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter correct role"),u.Qb())}function F(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter a password"),u.Qb())}function D(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please confirm your password"),u.Qb())}function E(e,t){1&e&&(u.Rb(0,"button",16),u.uc(1,"CREATE"),u.Qb())}function G(e,t){1&e&&u.Nb(0,"mat-spinner")}var V,Z=((V=function(){function e(t){_classCallCheck(this,e),this.service=t,this.hide=!0,this.isLoading=!1,this.createUserForm=new o.d({firstname:new o.b("",o.m.required),lastname:new o.b("",o.m.required),image:new o.b("",o.m.required,[M]),email:new o.b("",[o.m.required,o.m.email]),role:new o.b("",o.m.required),password:new o.b("",o.m.required),confirmPassword:new o.b("",o.m.required)})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authStatusSub=this.service.getAuthStatusListener().subscribe((function(t){e.isLoading=!1}))}},{key:"pickImage",value:function(e){var t=this,n=e.target.files[0];this.createUserForm.patchValue({image:n}),this.createUserForm.get("image").updateValueAndValidity();var a=new FileReader;a.onload=function(){t.imagePreview=a.result},a.readAsDataURL(n)}},{key:"createData",value:function(){this.createUserForm.invalid||(this.isLoading=!0,this.service.createUser(this.createUserForm.value.firstname,this.createUserForm.value.lastname,this.createUserForm.value.email,this.createUserForm.value.role,this.createUserForm.value.password,this.createUserForm.value.confirmPassword,this.createUserForm.value.image),this.createUserForm.reset())}},{key:"ngOnDestroy",value:function(){this.authStatusSub.unsubscribe()}},{key:"firstname",get:function(){return this.createUserForm.get("firstname")}},{key:"lastname",get:function(){return this.createUserForm.get("lastname")}},{key:"email",get:function(){return this.createUserForm.get("email")}},{key:"role",get:function(){return this.createUserForm.get("role")}},{key:"password",get:function(){return this.createUserForm.get("password")}},{key:"confirmPassword",get:function(){return this.createUserForm.get("confirmPassword")}}]),e}()).\u0275fac=function(e){return new(e||V)(u.Mb(m.a))},V.\u0275cmp=u.Gb({type:V,selectors:[["ng-component"]],decls:40,vars:15,consts:[[3,"formGroup","ngSubmit"],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],[4,"ngIf"],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["matInput","","formControlName","role","placeholder","role","required",""],["matInput","","formControlName","password","placeholder","********","required","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","confirm password","required","",3,"type"],["mat-raised-button","","color","accent",4,"ngIf"],[1,"image-preview"],[3,"src"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){var n=u.Sb();u.Rb(0,"mat-card"),u.Rb(1,"span"),u.uc(2,"CREATE USER"),u.Qb(),u.Rb(3,"form",0),u.Zb("ngSubmit",(function(){return t.createData()})),u.Rb(4,"div"),u.Rb(5,"button",1),u.Zb("click",(function(){return u.nc(n),u.mc(8).click()})),u.uc(6," IMAGE "),u.Qb(),u.Rb(7,"input",2,3),u.Zb("change",(function(e){return t.pickImage(e)})),u.Qb(),u.Qb(),u.tc(9,L,2,1,"div",4),u.Rb(10,"mat-form-field"),u.Nb(11,"input",5),u.tc(12,x,2,0,"mat-error",6),u.Qb(),u.Rb(13,"mat-form-field"),u.Nb(14,"input",7),u.tc(15,S,2,0,"mat-error",6),u.Qb(),u.Rb(16,"mat-form-field"),u.Nb(17,"input",8),u.tc(18,A,2,0,"mat-error",6),u.Qb(),u.Rb(19,"mat-form-field"),u.Nb(20,"input",9),u.Nb(21,"br"),u.Rb(22,"mat-hint"),u.uc(23," roles can only be (admin|user|manager)"),u.Qb(),u.tc(24,q,2,0,"mat-error",6),u.Qb(),u.Rb(25,"mat-form-field"),u.Rb(26,"mat-label"),u.uc(27,"Password"),u.Qb(),u.Nb(28,"input",10),u.Rb(29,"button",11),u.Zb("click",(function(){return t.hide=!t.hide})),u.Rb(30,"mat-icon"),u.uc(31),u.Qb(),u.Qb(),u.tc(32,F,2,0,"mat-error",6),u.Qb(),u.Rb(33,"mat-form-field"),u.Rb(34,"mat-label"),u.uc(35,"confirm Password"),u.Qb(),u.Nb(36,"input",12),u.tc(37,D,2,0,"mat-error",6),u.Qb(),u.tc(38,E,2,0,"button",13),u.tc(39,G,1,0,"mat-spinner",6),u.Qb(),u.Qb()}2&e&&(u.Bb(3),u.hc("formGroup",t.createUserForm),u.Bb(6),u.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.createUserForm.get("image").valid),u.Bb(3),u.hc("ngIf",t.firstname.touched&&t.firstname.invalid),u.Bb(3),u.hc("ngIf",t.lastname.touched&&t.lastname.invalid),u.Bb(3),u.hc("ngIf",t.email.touched&&t.email.invalid),u.Bb(6),u.hc("ngIf",t.role.touched&&t.role.invalid),u.Bb(4),u.hc("type",t.hide?"password":"text"),u.Bb(1),u.Cb("aria-label","Hide password")("aria-pressed",t.hide),u.Bb(2),u.vc(t.hide?"visibility_off":"visibility"),u.Bb(1),u.hc("ngIf",t.password.touched&&t.password.invalid),u.Bb(4),u.hc("type",t.hide?"password":"text"),u.Bb(1),u.hc("ngIf",t.confirmPassword.touched&&t.confirmPassword.invalid),u.Bb(1),u.hc("ngIf",!t.isLoading),u.Bb(1),u.hc("ngIf",t.isLoading))},directives:[O.a,o.n,o.i,o.e,f.b,i.k,Q.b,U.a,o.a,o.h,o.c,o.l,Q.e,Q.f,Q.g,N.a,Q.a,B.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% auto}.image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}mat-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-size:x-large;margin:8% 30%}@media (max-width:768px){mat-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:3% auto;text-align:center}}"]}),V);function z(e,t){if(1&e&&(u.Rb(0,"div",13),u.Nb(1,"img",6),u.Qb()),2&e){var n=u.cc();u.Bb(1),u.hc("src",n.imagePreview,u.oc)}}function T(e,t){1&e&&(u.Rb(0,"button",14),u.uc(1,"UPDATE"),u.Qb())}function j(e,t){1&e&&u.Nb(0,"mat-spinner")}var H,J=((H=function(){function e(t,n){_classCallCheck(this,e),this.service=t,this.route=n,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userUpdateSub=this.service.getUserUpdateDataListener().subscribe((function(t){e.isLoading=!1})),this.userUpdation=new o.d({firstname:new o.b("",o.m.required),lastname:new o.b("",o.m.required),image:new o.b("",o.m.required,[M]),email:new o.b("",[o.m.required,o.m.email]),role:new o.b("",o.m.required)}),this.route.paramMap.subscribe((function(t){t.has("id")?(e.userId=t.get("id"),e.service.getUserById(e.userId).subscribe((function(t){var n;n=t.data.data,e.user={firstname:n.firstname,lastname:n.lastname,email:n.email,role:n.role,image:n.image},e.userUpdation.patchValue({firstname:e.user.firstname,lastname:e.user.lastname,email:e.user.email,role:e.user.role,image:e.user.image})}))):e.userId=null}))}},{key:"pickImage",value:function(e){var t=this,n=e.target.files[0];this.userUpdation.patchValue({image:n}),this.userUpdation.get("image").updateValueAndValidity();var a=new FileReader;a.onload=function(){t.imagePreview=a.result},a.readAsDataURL(n)}},{key:"updateUserData",value:function(){console.log(this.userUpdation.value),this.userUpdation.invalid||(this.isLoading=!0,this.service.updateUser(this.userId,this.userUpdation.value.firstname,this.userUpdation.value.lastname,this.userUpdation.value.role,this.userUpdation.value.email,this.userUpdation.value.image),this.userUpdation.reset())}},{key:"ngOnDestroy",value:function(){this.userUpdateSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||H)(u.Mb(d.a),u.Mb(s.a))},H.\u0275cmp=u.Gb({type:H,selectors:[["ng-component"]],decls:25,vars:5,consts:[[3,"formGroup","ngSubmit"],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],[1,"image-display"],[3,"src"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["matInput","","formControlName","role","placeholder","role","required",""],["mat-raised-button","","color","accent",4,"ngIf"],[4,"ngIf"],[1,"image-preview"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){var n=u.Sb();u.Rb(0,"mat-card"),u.Rb(1,"span"),u.uc(2,"UPDATE USER"),u.Qb(),u.Rb(3,"form",0),u.Zb("ngSubmit",(function(){return t.updateUserData()})),u.Rb(4,"div"),u.Rb(5,"button",1),u.Zb("click",(function(){return u.nc(n),u.mc(8).click()})),u.uc(6," UPDATE IMAGE "),u.Qb(),u.Rb(7,"input",2,3),u.Zb("change",(function(e){return t.pickImage(e)})),u.Qb(),u.Qb(),u.tc(9,z,2,1,"div",4),u.Rb(10,"div",5),u.Nb(11,"img",6),u.Qb(),u.Rb(12,"mat-form-field"),u.Nb(13,"input",7),u.Qb(),u.Rb(14,"mat-form-field"),u.Nb(15,"input",8),u.Qb(),u.Rb(16,"mat-form-field"),u.Nb(17,"input",9),u.Qb(),u.Rb(18,"mat-form-field"),u.Nb(19,"input",10),u.Nb(20,"br"),u.Rb(21,"mat-hint"),u.uc(22," roles can only be (admin|user|manager)"),u.Qb(),u.Qb(),u.tc(23,T,2,0,"button",11),u.tc(24,j,1,0,"mat-spinner",12),u.Qb(),u.Qb()}2&e&&(u.Bb(3),u.hc("formGroup",t.userUpdation),u.Bb(6),u.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.userUpdation.get("image").valid),u.Bb(2),u.hc("src",t.user.image,u.oc),u.Bb(12),u.hc("ngIf",!t.isLoading),u.Bb(1),u.hc("ngIf",t.isLoading))},directives:[O.a,o.n,o.i,o.e,f.b,i.k,Q.b,U.a,o.a,o.h,o.c,o.l,Q.e,B.b],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% auto}.image-display[_ngcontent-%COMP%], .image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}span[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{font-size:large;text-align:center;margin:8px 0;text-transform:uppercase}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),H),K=function(){return["/auth/admin"]};function X(e,t){1&e&&(u.Rb(0,"button",6),u.uc(1," see manager panel "),u.Qb()),2&e&&u.hc("routerLink",u.ic(1,K))}function Y(e,t){1&e&&(u.Rb(0,"button",7),u.uc(1," see admin panel "),u.Qb()),2&e&&u.hc("routerLink",u.ic(1,K))}var $,W,ee=((W=function(){function e(t,n){_classCallCheck(this,e),this.userService=t,this.authService=n,this.adminRole="admin",this.managerRole="manager",this.userRole=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.getMe().subscribe((function(t){t&&(e.userInformation=t.data.data)})),this.userRole=this.authService.getRole()}},{key:"onClick",value:function(){this.userService.delMe()}}]),e}()).\u0275fac=function(e){return new(e||W)(u.Mb(d.a),u.Mb(m.a))},W.\u0275cmp=u.Gb({type:W,selectors:[["user-portal"]],decls:17,vars:9,consts:[[3,"src"],["routerLink","/auth/user-settings"],[1,"fa","fa-cog"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(u.Rb(0,"mat-card"),u.Nb(1,"img",0),u.Rb(2,"mat-card-title"),u.uc(3),u.Qb(),u.Rb(4,"span"),u.uc(5),u.Qb(),u.Nb(6,"br"),u.Rb(7,"span"),u.uc(8),u.dc(9,"date"),u.Qb(),u.Rb(10,"a",1),u.Nb(11,"i",2),u.Qb(),u.Nb(12,"br"),u.Rb(13,"button",3),u.Zb("click",(function(){return t.onClick()})),u.uc(14," delete account "),u.Qb(),u.tc(15,X,2,2,"button",4),u.tc(16,Y,2,2,"button",5),u.Qb()),2&e&&(u.Bb(1),u.hc("src",t.userInformation.image,u.oc),u.Bb(2),u.xc("",t.userInformation.firstname," ",t.userInformation.lastname,""),u.Bb(2),u.wc(" Email: ",t.userInformation.email,""),u.Bb(3),u.wc(" Last password changed at :",u.ec(9,7,t.userInformation.passwordChangedAt),""),u.Bb(7),u.hc("ngIf",t.userRole===t.managerRole),u.Bb(1),u.hc("ngIf",t.userRole===t.adminRole))},directives:[O.a,O.c,s.e,f.b,i.k,s.c],pipes:[i.d],styles:["mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:30%;float:left}mat-card[_ngcontent-%COMP%]{height:100%;margin-top:5%}mat-card-title[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%;text-align:center;font-size:xx-large}button[_ngcontent-%COMP%]{margin-left:10px}span[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%}i[_ngcontent-%COMP%]{margin:10px;font-size:x-large;opacity:.7}i[_ngcontent-%COMP%], i[_ngcontent-%COMP%]:hover{color:teal}i[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width:768px){mat-card-title[_ngcontent-%COMP%]{font-size:20px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}"]}),W),te=(($=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||$)},$.\u0275cmp=u.Gb({type:$,selectors:[["user-settings"]],decls:6,vars:0,consts:[["mat-button","","routerLinkActive","mat-accent","routerLink","/auth/user-change-password"],["mat-button","","routerLink","/auth/user-update-me","routerLinkActive","mat-accent"]],template:function(e,t){1&e&&(u.Rb(0,"mat-card"),u.Rb(1,"a",0),u.uc(2,"change password"),u.Qb(),u.Nb(3,"span"),u.Rb(4,"a",1),u.uc(5,"Update your profile"),u.Qb(),u.Qb())},directives:[O.a,f.a,s.e,s.d],styles:["mat-card[_ngcontent-%COMP%]{width:80%;margin:0 5%}mat-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin-left:2rem;float:center}"]}),$);function ne(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"please enter the required fields"),u.Qb())}function ae(e,t){if(1&e&&(u.Rb(0,"div",10),u.Nb(1,"img",11),u.Qb()),2&e){var n=u.cc();u.Bb(1),u.hc("src",n.imagePreview,u.oc)}}function re(e,t){1&e&&(u.Rb(0,"button",12),u.uc(1,"update"),u.Qb())}function ie(e,t){1&e&&u.Nb(0,"mat-spinner")}var oe,ce=((oe=function(){function e(t){_classCallCheck(this,e),this.service=t,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userUpdateSub=this.service.getUserUpdateDataListener().subscribe((function(t){e.isLoading=!1})),this.userUpdate=new o.d({firstname:new o.b("",o.m.required),lastname:new o.b("",o.m.required),image:new o.b("",o.m.required,[M]),email:new o.b("",[o.m.required,o.m.email])})}},{key:"pickImage",value:function(e){var t=this,n=e.target.files[0];this.userUpdate.patchValue({image:n}),this.userUpdate.get("image").updateValueAndValidity();var a=new FileReader;a.onload=function(){t.imagePreview=a.result},a.readAsDataURL(n)}},{key:"updateMe",value:function(){this.isLoading=!0,console.log(this.userUpdate.value),this.service.updateMe(this.userUpdate.value.firstname,this.userUpdate.value.lastname,this.userUpdate.value.email,this.userUpdate.value.image),this.userUpdate.reset()}},{key:"ngOnDestroy",value:function(){this.userUpdateSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||oe)(u.Mb(d.a))},oe.\u0275cmp=u.Gb({type:oe,selectors:[["app-user-update-me"]],decls:19,vars:5,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","formControlName","firstname","placeholder","firstname","required",""],["matInput","","formControlName","lastname","placeholder","lastname","required",""],["matInput","","formControlName","email","placeholder","email@example.com","required",""],["mat-stroked-button","","type","button",3,"click"],["type","file",3,"change"],["filepicker",""],["class","image-preview",4,"ngIf"],["mat-raised-button","","color","accent",4,"ngIf"],[1,"image-preview"],[3,"src"],["mat-raised-button","","color","accent"]],template:function(e,t){if(1&e){var n=u.Sb();u.Rb(0,"mat-card"),u.Rb(1,"span"),u.uc(2,"Update your data"),u.Qb(),u.Rb(3,"form",0),u.Zb("ngSubmit",(function(){return t.updateMe()})),u.tc(4,ne,2,0,"mat-error",1),u.Rb(5,"mat-form-field"),u.Nb(6,"input",2),u.Qb(),u.Rb(7,"mat-form-field"),u.Nb(8,"input",3),u.Qb(),u.Rb(9,"mat-form-field"),u.Nb(10,"input",4),u.Qb(),u.Rb(11,"div"),u.Rb(12,"button",5),u.Zb("click",(function(){return u.nc(n),u.mc(15).click()})),u.uc(13," PROFILE IMAGE "),u.Qb(),u.Rb(14,"input",6,7),u.Zb("change",(function(e){return t.pickImage(e)})),u.Qb(),u.Qb(),u.tc(16,ae,2,1,"div",8),u.tc(17,re,2,0,"button",9),u.tc(18,ie,1,0,"mat-spinner",1),u.Qb(),u.Qb()}2&e&&(u.Bb(3),u.hc("formGroup",t.userUpdate),u.Bb(1),u.hc("ngIf",t.userUpdate.errors),u.Bb(12),u.hc("ngIf",""!==t.imagePreview&&t.imagePreview&&t.userUpdate.get("image").valid),u.Bb(1),u.hc("ngIf",!t.isLoading),u.Bb(1),u.hc("ngIf",t.isLoading))},directives:[O.a,o.n,o.i,o.e,i.k,Q.b,U.a,o.a,o.h,o.c,o.l,f.b,Q.a,B.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% 20%}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.image-preview[_ngcontent-%COMP%]{height:5rem;border-radius:50%;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),oe);function se(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter Your Old Password"),u.Qb())}function ue(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please enter Your New Password"),u.Qb())}function me(e,t){1&e&&(u.Rb(0,"mat-error"),u.uc(1,"Please Re-enter Your New Password"),u.Qb())}function le(e,t){1&e&&(u.Rb(0,"button",6),u.uc(1," Change Password "),u.Qb())}function be(e,t){1&e&&u.Nb(0,"mat-spinner")}var de,fe=((de=function(){function e(t){_classCallCheck(this,e),this.service=t,this.hide=!0,this.isLoading=!1,this.changePassword=new o.d({oldPassword:new o.b("",o.m.required),newPassword:new o.b("",o.m.required),confirmPassword:new o.b("",o.m.required)})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authStatusSub=this.service.getAuthStatusListener().subscribe((function(t){e.isLoading=!1}))}},{key:"changeUserPass",value:function(){this.changePassword.invalid||(this.isLoading=!0,this.service.updatePassword(this.changePassword.value.oldPassword,this.changePassword.value.newPassword,this.changePassword.value.confirmPassword),this.changePassword.reset())}},{key:"ngOnDestroy",value:function(){this.authStatusSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||de)(u.Mb(m.a))},de.\u0275cmp=u.Gb({type:de,selectors:[["app-user-change-password"]],decls:19,vars:6,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","oldPassword","placeholder","your Old Password Here","required",""],[4,"ngIf"],["matInput","","formControlName","newPassword","placeholder","your New Password Here","required",""],["matInput","","formControlName","confirmPassword","placeholder","your confirm Password Here","required",""],["mat-raised-button","","color","accent",4,"ngIf"],["mat-raised-button","","color","accent"]],template:function(e,t){1&e&&(u.Rb(0,"mat-card"),u.Rb(1,"form",0),u.Zb("ngSubmit",(function(){return t.changeUserPass()})),u.Rb(2,"mat-form-field"),u.Rb(3,"mat-label"),u.uc(4," Old Password"),u.Qb(),u.Nb(5,"input",1),u.tc(6,se,2,0,"mat-error",2),u.Qb(),u.Rb(7,"mat-form-field"),u.Rb(8,"mat-label"),u.uc(9," New Password"),u.Qb(),u.Nb(10,"input",3),u.tc(11,ue,2,0,"mat-error",2),u.Qb(),u.Rb(12,"mat-form-field"),u.Rb(13,"mat-label"),u.uc(14,"Confirm New Password"),u.Qb(),u.Nb(15,"input",4),u.tc(16,me,2,0,"mat-error",2),u.Qb(),u.tc(17,le,2,0,"button",5),u.tc(18,be,1,0,"mat-spinner",2),u.Qb(),u.Qb()),2&e&&(u.Bb(1),u.hc("formGroup",t.changePassword),u.Bb(5),u.hc("ngIf",t.changePassword.get("oldPassword").invalid),u.Bb(5),u.hc("ngIf",t.changePassword.get("newPassword").invalid),u.Bb(5),u.hc("ngIf",t.changePassword.get("confirmPassword").invalid),u.Bb(1),u.hc("ngIf",!t.isLoading),u.Bb(1),u.hc("ngIf",t.isLoading))},directives:[O.a,o.n,o.i,o.e,Q.b,Q.f,U.a,o.a,o.h,o.c,o.l,i.k,Q.a,f.b,B.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:60%;margin:10% 20%}mat-spinner[_ngcontent-%COMP%]{margin:0 40%}"]}),de);function ge(e,t){if(1&e&&(u.Rb(0,"span"),u.uc(1),u.dc(2,"date"),u.Qb()),2&e){var n=u.cc();u.Bb(1),u.wc(" Last password changed at :",u.ec(2,1,n.oneUser.passwordChangedAt),"")}}var he,pe,ve,we=function(){return["/auth/admin"]},Pe=[{path:"edit/:id",component:J,canActivate:[l,b]},{path:"user/:id",component:(he=function(){function e(t,n){_classCallCheck(this,e),this.service=t,this.route=n,this.oneUserData=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){t.has("id")?(e.userId=t.get("id"),e.service.getUserById(e.userId).subscribe((function(t){var n;n=t.data.data,e.oneUser=n,e.oneUserData=n}))):e.userId=null}))}}]),e}(),he.\u0275fac=function(e){return new(e||he)(u.Mb(d.a),u.Mb(s.a))},he.\u0275cmp=u.Gb({type:he,selectors:[["ng-component"]],decls:14,vars:8,consts:[[3,"src"],[4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(u.Rb(0,"mat-card"),u.Nb(1,"img",0),u.Rb(2,"mat-card-title"),u.uc(3),u.Qb(),u.Rb(4,"span"),u.uc(5),u.Qb(),u.Nb(6,"br"),u.Rb(7,"span"),u.uc(8),u.Qb(),u.Nb(9,"br"),u.tc(10,ge,3,3,"span",1),u.Nb(11,"br"),u.Rb(12,"button",2),u.uc(13," <- GO BACK\n"),u.Qb(),u.Qb()),2&e&&(u.Bb(1),u.hc("src",t.oneUser.image,u.oc),u.Bb(2),u.xc("",t.oneUser.firstname," ",t.oneUser.lastname,""),u.Bb(2),u.wc(" Email: ",t.oneUser.email,""),u.Bb(3),u.wc(" Role: ",t.oneUser.role,""),u.Bb(2),u.hc("ngIf",t.oneUser.passwordChangedAt),u.Bb(2),u.hc("routerLink",u.ic(7,we)))},directives:[O.a,O.c,i.k,f.b,s.c],pipes:[i.d],styles:["mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:30%;float:left}mat-card[_ngcontent-%COMP%]{height:100%;margin-top:5%}mat-card-title[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;margin-top:-43px;margin-left:-152px}mat-card-title[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{width:60%;padding-top:10%;padding-left:3%}i[_ngcontent-%COMP%]{margin-left:3%;font-size:x-large;opacity:.7}i[_ngcontent-%COMP%], i[_ngcontent-%COMP%]:hover{color:teal}i[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width:768px){mat-card-title[_ngcontent-%COMP%]{margin-top:-4px;margin-left:-51px;font-size:27px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}"]}),he),canActivate:[l,b]},{path:"admin",component:_,canActivate:[l,b]},{path:"create-user",component:Z,canActivate:[l,b]},{path:"user-change-password",component:fe,canActivate:[l]},{path:"user-update-me",component:ce,canActivate:[l]},{path:"user-settings",component:te,canActivate:[l]},{path:"profile",component:ee,canActivate:[l]}],Ce=((ve=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:ve}),ve.\u0275inj=u.Jb({factory:function(e){return new(e||ve)},providers:[l,b],imports:[[s.f.forChild(Pe)],s.f]}),ve),Re=((pe=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:pe}),pe.\u0275inj=u.Jb({factory:function(e){return new(e||pe)},imports:[[i.b,o.k,o.f,c.a,s.f,Ce]]}),pe)}}]);